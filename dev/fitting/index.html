<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Fitting models · QuantReg.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">QuantReg.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../quickstart/">Quickstart</a></li><li><a class="tocitem" href="../types/">Types</a></li><li class="is-active"><a class="tocitem" href>Fitting models</a><ul class="internal"><li><a class="tocitem" href="#Generic-functions-1"><span>Generic functions</span></a></li><li><a class="tocitem" href="#Choosing-a-fitting-method-1"><span>Choosing a fitting method</span></a></li><li><a class="tocitem" href="#Barrodale-Roberts-Simplex-Method-1"><span>Barrodale-Roberts Simplex Method</span></a></li><li><a class="tocitem" href="#Frisch-Newton-Algorithm-1"><span>Frisch-Newton Algorithm</span></a></li><li><a class="tocitem" href="#Gurobi-1"><span>Gurobi</span></a></li></ul></li><li><a class="tocitem" href="../inference/">Inference</a></li><li><a class="tocitem" href="../example/">Example usage</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Fitting models</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Fitting models</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/fogarty-ben/QuantReg.jl/blob/master/docs/src/fitting.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Fitting-Quantile-Regression-Models-1"><a class="docs-heading-anchor" href="#Fitting-Quantile-Regression-Models-1">Fitting Quantile Regression Models</a><a class="docs-heading-anchor-permalink" href="#Fitting-Quantile-Regression-Models-1" title="Permalink"></a></h1><p>QuantReg.jl currently contains three methods for fitting quantile regression models: (1) the Barrodale-Roberts simple algorithm, (2) the Frisch-Newton algorithm, and (3) via the industrial solver Gurobi. The first two methods leverage FORTRAN code originally written for the R quantreg package. The third method was developed specifically for this package and only works if Gurobi is already installed on the user&#39;s machine.</p><h2 id="Generic-functions-1"><a class="docs-heading-anchor" href="#Generic-functions-1">Generic functions</a><a class="docs-heading-anchor-permalink" href="#Generic-functions-1" title="Permalink"></a></h2><p>A <code>QuantRegModel</code> object, named <code>model</code>, can be fit using the generic <code>fit!()</code> function, and indeed this is the function that most end users will leverage. This functions fits the object in place, modifying the <code>QuantRegFit</code> object stored at <code>model.fit</code>. For example,</p><pre><code class="language-none">julia&gt; model = QuantRegModel(@formula(Y ~ X1 + X2 + X3), df; τ=0.80, fitmethod=&quot;fn&quot;)</code></pre><p>creates an unfitted a quantile regression model at the 0.80th quantile and specifies for it to be fit via the Frisch-Newton. Then,</p><pre><code class="language-none">julia&gt; fit!(model)</code></pre><p>fits the model in-place via the specified method.</p><p>Additionaly, there is a <code>fit()</code> method that creates a deep copy of the passed model, fits that copy, and returns the new, fitted model.</p><article class="docstring"><header><a class="docstring-binding" id="StatsBase.fit!" href="#StatsBase.fit!"><code>StatsBase.fit!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">fit!(model::QuantRegModel)</code></pre><p>Fit <code>model</code> in-place according to <code>model.fit.method</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fogarty-ben/QuantReg.jl/blob/054e0bf09cb64901faf856dff6eea236fd553b5a/src/fitqr.jl#L4-L8">source</a></section><section><div><p>Fit a statistical model in-place.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="QuantReg.fit" href="#QuantReg.fit"><code>QuantReg.fit</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">fit(model::QuantRegModel)</code></pre><p>Deep copy <code>model</code> and fit according to <code>model.fit.method</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fogarty-ben/QuantReg.jl/blob/054e0bf09cb64901faf856dff6eea236fd553b5a/src/fitqr.jl#L32-L36">source</a></section></article><p>Ultimately, these two functions simply serve as a one-stop wrapper for fitting a model and call different subroutines depending on the value of <code>model.fitmethod</code>.</p><h2 id="Choosing-a-fitting-method-1"><a class="docs-heading-anchor" href="#Choosing-a-fitting-method-1">Choosing a fitting method</a><a class="docs-heading-anchor-permalink" href="#Choosing-a-fitting-method-1" title="Permalink"></a></h2><ul><li>TODO: Write about simulation results *</li></ul><h2 id="Barrodale-Roberts-Simplex-Method-1"><a class="docs-heading-anchor" href="#Barrodale-Roberts-Simplex-Method-1">Barrodale-Roberts Simplex Method</a><a class="docs-heading-anchor-permalink" href="#Barrodale-Roberts-Simplex-Method-1" title="Permalink"></a></h2><p>The Barrodale-Roberts simplex algorithm implemented can be used for both fitting the model and for computing inference via a rank test inversion. When fitting, the following method is called with the keyword argument, <code>ci</code>, set to its default value of false.</p><p>To select this method when specifying a quantile regression model, set the keyword argument <code>fitmethod=&quot;br&quot;</code> in either the <code>rq</code> function of the <code>QuantRegModel</code> constructor.</p><article class="docstring"><header><a class="docstring-binding" id="QuantReg.fitbr!" href="#QuantReg.fitbr!"><code>QuantReg.fitbr!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">fitbr!(model::QuantRegModel; ci::Bool=false),</code></pre><p>Fit <code>model</code> using the Barrodale-Roberts method.</p><p>If ci is false, <code>model.fit</code> is updated in place to reflect the fit produced by running the Barrodale-Roberts simplex, and confidence intervals are not computed. Otherwise, confidence intervals are computed, and <code>model.inf</code> is updated in place to reflect the confidence invervals produced by this method, but <code>model.fit</code> is not updated.</p><p>This fitting method leverages public domain FORTRAN code written by Roger Koenker for the R <code>quantreg</code> package.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fogarty-ben/QuantReg.jl/blob/054e0bf09cb64901faf856dff6eea236fd553b5a/src/fitqr.jl#L39-L51">source</a></section></article><p>This method relies on a subroutine, <code>fitbrfortran</code>, that handles the FORTRAN call.</p><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>QuantReg.fitbr!</code>. Check Documenter&#39;s build log for details.</p></div></div><h2 id="Frisch-Newton-Algorithm-1"><a class="docs-heading-anchor" href="#Frisch-Newton-Algorithm-1">Frisch-Newton Algorithm</a><a class="docs-heading-anchor-permalink" href="#Frisch-Newton-Algorithm-1" title="Permalink"></a></h2><p>The Frisch-Newton algorithm implemented is an interior point method that can be used to solve quantile regression problems. Unlike the other two methods in this package, this method does not produce solutions to the dual problem.</p><p>To select this method when specifying a quantile regression model, set the keyword argument <code>fitmethod=&quot;fn&quot;</code> in either the <code>rq</code> function of the <code>QuantRegModel</code> constructor.</p><article class="docstring"><header><a class="docstring-binding" id="QuantReg.fitfn!" href="#QuantReg.fitfn!"><code>QuantReg.fitfn!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">fitfn!(model::QuantRegModel)</code></pre><p>Fit <code>model</code> using the Frish-Newton algorithm.</p><p>Fitting with this method does not produce solutions to the dual problem.</p><p>This fitting method leverages public domain FORTRAN code written by Roger Koenker for the R <code>quantreg</code> package. In the <code>quantreg</code> package, this is equivalent to the <code>fn</code> and <code>fnb</code> methods.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fogarty-ben/QuantReg.jl/blob/054e0bf09cb64901faf856dff6eea236fd553b5a/src/fitqr.jl#L192-L202">source</a></section></article><h2 id="Gurobi-1"><a class="docs-heading-anchor" href="#Gurobi-1">Gurobi</a><a class="docs-heading-anchor-permalink" href="#Gurobi-1" title="Permalink"></a></h2><p>The only fitting method available via this package that is not available via the R quantreg package is fitting via Gurobi. This fitting method is only available to users who already have a licensed version of Gurobi installed on their machine and the Gurobi.jl package added in Julia. Note that Gurobi.jl is not installed as a dependency of QuantReg.jl so that the package is accessible to users without a licensed version of Gurobi (the package Gurobi.jl cannot be properly installed without a licensed version of Gurobi). Further note that even if an active Gurobi license is installed on the user&#39;s machine, the <code>GUROBI_HOME</code> environmental variable must be properly set for the Gurobi fitting method to be available.</p><p>To select this method when specifying a quantile regression model, set the keyword argument <code>fitmethod=&quot;fn&quot;</code> in either the <code>gurobi</code> function of the <code>QuantRegModel</code> constructor.</p><article class="docstring"><header><a class="docstring-binding" id="QuantReg.fitgurobi!" href="#QuantReg.fitgurobi!"><code>QuantReg.fitgurobi!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">fitgurobi(model::QuantRegModel)</code></pre><p>Fit <code>model</code> using Gurobi via Julia&#39;s JuMP library.</p><p>This algorithm has been tailored specifically to work with Julia (hence the use of direct) mode. Some time was spent researching the use of open-source solvers such as GLPK, but they proved to be too slow. Extending this method to work with other solvers, such as CPLEX could be accomplished by switching the optimizer and creating the model in automatic mode, but this may leave some small efficiency gains on the table.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/fogarty-ben/QuantReg.jl/blob/054e0bf09cb64901faf856dff6eea236fd553b5a/src/fitqr.jl#L143-L153">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../types/">« Types</a><a class="docs-footer-nextpage" href="../inference/">Inference »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 29 March 2020 17:55">Sunday 29 March 2020</span>. Using Julia version 1.4.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
